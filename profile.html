<!DOCTYPE html>
<html>
<head>
	<title>SoD Registration</title>
	
	<!-- CSS  -->
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  	<link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  	<link href="css/registrationStyles.css" type="text/css" rel="stylesheet"/>
	
</head>
<body>


	<!-- Dropdown Structure 
	<ul id="dropdown1" class="dropdown-content">
	  <li><a href="#!">Logout</a></li>
	</ul>
	<nav>
	  <div class="nav-wrapper container">
	    <a href="#!" class="brand-logo">SkillsOnDemand</a>
	    <ul class="right hide-on-med-and-down">
	      <li><a href="index.html">Main</a></li>
	      <li><a href="index.html">Components</a></li>
	      
	      <li id="accountName"><a class="dropdown-button" href="#!" data-activates="dropdown1"><i class="material-icons right">arrow_drop_down</i></a></li>
	    </ul>
	  </div>
	</nav>
	<br />
	<br />
    -->



    <!--

            <a href="index.html" class="brand-logo">SkillsOnDemand</a>
            
            <a id="nav-mobile accountName" class='dropdown-button btn right hide-on-med-and-down' href='#' data-activates='dropdown1'></a>

           
            <ul id='dropdown1' class='dropdown-content'>
                <li><a href="index.html">Main</a></li>
                <li><a href="#!">two</a></li>
                <li class="divider"></li>
                <li><a href="#!">Logout</a></li>
            </ul>
        
        -->




    <!--NAVBAR-->
    <nav id='navBar'>
        <div class="nav-wrapper container ">
            <a href="index.html" class="brand-logo">SkillsOnDemand</a>
            


            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a id="accountName" href='#'></a></li>
                <li><a id="menuDrop" class='btn-floating btn waves-effect waves-light dropdown-button right hide-on-med-and-down' href='#' data-activates='dropdown1'><i id='flechaDropdown' class="material-icons">arrow_drop_down</i></a></li>

            </ul>



            
           
            <ul id='dropdown1' class='dropdown-content'>
                <li><a href="searchSkills.html">Seach</a></li>
                <li><a href="profile.html">Profile</a></li>
                <li class="divider"></li>
                <li><a href="#!">Logout</a></li>
            </ul>    
        </div>
    </nav>











    

	<div class="row container">
    <div class="col s12">
      <ul id="tabs" class="tabs z-depth-1">
        <li id="tab1" class="tab col s3"><a class="active" href="#test1">Cart</a></li>
        <li id="tab2" class="tab col s3"><a href="#test2">Past Orders</a></li>
        <li id="tab3" class="tab col s3"><a href="#test3">Posts</a></li> 
        <li id="tab4" class="tab col s3"><a href="#test4">Messages</a></li>
        <li id="tab5" class="tab col s3"><a href="#test5">Account</a></li>
      </ul>
    </div>
    <div id="test1" class="col s12">
    	<div id="content-tab1">
                <div id="forSaleContent">
                    <table class="highlight centered" id="cartTable">
                        <tr>
                            <th>ID</th>
                            <th>Skill</th>
                            <th>Name</th>
                            <th>Email</th>
                        </tr>
                    </table>
                    <a id="hire" class="waves-effect waves-light btn">Hire</a>	
                </div>
        </div>
    </div>
    <div id="test2" class="col s12">
    	<div id="content-tab2">
                <div id="forSaleContent">
                    <table class="highlight centered" id="itemTable">
                        <tr>
                            <th>ID</th>
                            <th>Skill</th>
                            <th>Name</th>
                            <th>Email</th>
                        </tr>
                    </table>	
                </div>
        </div>
    </div>
    <div id="test3" class="col s12">
    	Test 3
    </div>
    <div id="test4" class="col s12">
    	Test 4
    </div>
     <div id="test5" class="col s12">
    	<div id="registrationContainer" class="section">
        <div class="container">
            <h1>Tell us more about yourself</h1>
            <h3>*None of this is required</h3>
        
            <div class="row">
                <form class="col s12 ">

                    <div class="row">
                        <div class="input-field col s6">
                            <input id="userYear" type="text" class="validate">
                            <label for="userYear">Year Birthdate</label>
                        </div>
                    </div>
                    

                    <div class="row">
                        <div class="input-field col s6">
                            <input id="userCountry" type="text" class="validate">
                            <label for="userCountry">Country</label>
                        </div>

                        <div class="input-field col s6">
                            <input id="userCity" type="text" class="validate">
                            <label for="userCity">City</label>
                        </div>
                    </div>


                    <div class="row">
                        <div class="input-field col s6">
                            <input id="userWebsite" type="text" class="validate">
                            <label for="userWebsite">Website</label>
                        </div>
                    </div>

                    <div class="row">
                        <div class="input-field col s6">
                            <input id="userPhone" type="text" class="validate">
                            <label for="userPhone">Phone</label>
                        </div>
                    </div>


                    <div class="row">
                        <div class="input-field col s12">
                            <input id="userUniversity" type="text" class="validate">
                            <label for="userUniversity">University</label>
                        </div>

                    </div>

                    <div class="row">
                        <div class="input-field col s12">
                            <textarea id="userInterests" class="materialize-textarea"></textarea>
                            <label for="userInterests">What are some of your interests</label>
                        </div>
                    </div>



                    <div class="row">
                        <div class="input-field col s12">
                            <textarea id="userAdditional" class="materialize-textarea"></textarea>
                            <label for="userAdditional">Tell us more about yourself</label>
                        </div>
                    </div>
                    
              
                    
                    <div class="row">
                        <input class="btn-large" type="button" id="updateUserData" value="Save"/>
                    </div>
                </form>
            </div>

        </div>
        
    </div>
    </div>
  	</div>

	<!--Import jQuery before materialize.js-->
	<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="js/materialize.min.js"></script>

</body>
<script type="text/javascript">
	$( document ).on('ready', function() {

        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 15 // Creates a dropdown of 15 years to control year
        });

		 $.ajax({
                type: "POST",
                url: "data/applicationLayer.php",
                dataType: "json",
                data: {'action':'NAME'},
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                success: function(jsonData) {


                    $("#accountName").html("Welcome again " + jsonData + " ");


                    $("#tab1").trigger("click");
                },
                error: function(errorMsg){
                    alert(errorMsg.statusText);
                }
            });



		// $("#loginButton").on("click", function(){
		// 	var jsonObject = {"email": $("#email").val(),
  //                              "password": $("#password").val(),
  //                          	   "action": "LOGIN"};
		// 	$.ajax({
  //             	type: 'POST',
  //             	url: 'data/applicationLayer.php',
  //             	data: jsonObject,
  //             	dataType:'json',
  //             	headers:{'Content-Type': 'application/x-www-form-urlencoded'},
  //             	success: function(jsonData){
  //               	alert("Welcome back " + jsonData.fName + " " + jsonData.lName);
  //               	alert("Redirect to somewhere else!");

  //             	},
  //             	error: function(errorMessage){
  //               	alert(errorMessage.statusText);
  //             	}
              	
  //          	});
		// });


		// $("#registerButton").on("click", function(){
		// 	 window.location.replace("registration.html");
		// });
	
	$("#tab1").on("click", function(){
		//alert("tab 1");
				$.ajax({
                    type: "POST",
                    url: "data/applicationLayer.php",
                    dataType: "json",
                    data: {'action':'CART', 'status':'P'},
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    success: function(jsonData) {
                        var tableRows = "";
                        $("#cartTable").find("td").remove();
                        if (jsonData.message == 'OK')
                        {
                            //alert("datos");
                            for(i = 0; i < jsonData.data.length; i ++)
                            {
                                tableRows += '<tr id=' + i + '><td>' + jsonData.data[i].orderId + '</td><td>' + jsonData.secondData[i].sTitle + '</td><td>' + jsonData.thirdData[i].name + ' ' + jsonData.thirdData[i].last + '</td><td>' + jsonData.secondData[i].sEmail + '</td></tr>';
                            } 

                            $("#cartTable").append(tableRows);
                        }
                        else
                        {
                            //alert("nope");
                             // $("#purchase").hide();
                             // $("#cancelPurchase").hide();
                             alert("Cart empty.");
                        }
                    },
                    error: function(errorMsg){
                        alert(errorMsg.statusText);
                    }
                });
	});
	$("#tab2").on("click", function(){
		//alert("tab 1");
				$.ajax({
                    type: "POST",
                    url: "data/applicationLayer.php",
                    dataType: "json",
                    data: {'action':'CART', 'status':'B'},
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    success: function(jsonData) {
                        var tableRows = "";
                        $("#itemTable").find("td").remove();
                        if (jsonData.message == 'OK')
                        {
                            //alert("datos");
                            for(i = 0; i < jsonData.data.length; i ++)
                            {
                                tableRows += '<tr id=' + i + '><td>' + jsonData.data[i].orderId + '</td><td>' + jsonData.secondData[i].sTitle + '</td><td>' + jsonData.thirdData[i].name + ' ' + jsonData.thirdData[i].last + '</td><td>' + jsonData.secondData[i].sEmail + '</td></tr>';
                            } 

                            $("#itemTable").append(tableRows);
                        }
                        else
                        {
                            //alert("nope");
                             // $("#purchase").hide();
                             // $("#cancelPurchase").hide();
                             alert("Cart empty.");
                        }
                    },
                    error: function(errorMsg){
                        alert(errorMsg.statusText);
                    }
                });
	});
	$("#tab3").on("click", function(){
		alert("tab 3");
	});
	$("#tab4").on("click", function(){
		alert("tab 4");
	});


	$("#hire").on("click", function(){
				$.ajax({
                    type: "POST",
                    url: "data/applicationLayer.php",
                    dataType: "json",
                    data: {'action': 'BUY'},
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    success: function(jsonData) {
                        alert(jsonData);
                        $("#tab2").trigger("click");
                    },
                    error: function(errorMsg){
                        alert(errorMsg.statusText);
                    }
                });
	});


    $("#updateUserData").on('click',function(){
        var jsonObject = {
            'yearBdate': parseInt($('#userYear').val()),
            'country': $('#userCountry').val(),
            'city': $('#userCity').val(),
            'website': $('#userWebsite').val(),
            'phone': parseInt($('#userPhone').val()),
            'university': $('#userUniversity').val(),
            'interests': $('#userInterests').val(),
            'additional': $('#userAdditional').val()
        };


        $.ajax({
            type: 'POST',
            url: 'data/applicationLayer.php',
            dataType: 'json',
            data: {'data':jsonObject, 'action':'UDATE_PROFILE'},
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            success: function(jsonData) {  
                alert(jsonData); 
            },
            error: function(errorMsg){
                alert(errorMsg.statusText);
            }
        });
    });



   










	});
</script
</html>